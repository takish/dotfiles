# å±¥æ­´ã¨æ“ä½œæ€§
set -g history-limit 100000

# 256è‰²ãƒ»çœŸã®ã‚«ãƒ©ãƒ¼ï¼ˆiTerm2ç”¨ï¼‰
set -g default-terminal "screen-256color"
set -as terminal-overrides ',xterm-256color:RGB'
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # undercurl colors

# ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—é…å»¶ã‚’ç„¡ãã™ï¼ˆnvimè¡¨ç¤ºå•é¡Œã®ä¸»å› ï¼‰
set -sg escape-time 0

# ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã‚’æœ‰åŠ¹åŒ–
set -g focus-events on

# ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ C-a ã«ï¼ˆå¥½ã¿ã§ï¼‰
set -g prefix C-t
#unbind C-b
#bind C-a send-prefix

# åˆ†å‰²ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼ˆvim é¢¨ï¼‰
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç°¡æ½”åŒ–
set -g status-bg default
set -g status-fg white
set -g status-left '[#S] '
set -g status-right '#H %H:%M %Y-%m-%d'
set -g history-limit 100000

# ãƒã‚¦ã‚¹æœ‰åŠ¹
set -g mouse on

# copy-mode ã®é¸æŠã‚’è‡ªå‹•ã§ pbcopy ã«æµã™
set -s copy-command 'pbcopy'
set -g set-clipboard on          # tmuxå´ã§ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰é€£æºã‚’è¨±å¯

# vi ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰å‰æï¼ˆå¥½ã¿ï¼‰
#setw -g mode-keys vi

# ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã®ã‚³ãƒ”ãƒ¼: 'y' ã§é¸æŠç¯„å›²ã‚’ pbcopy
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# ãƒã‚¦ã‚¹ãƒ‰ãƒ©ãƒƒã‚°çµ‚äº†æ™‚ã«ã‚‚ pbcopy
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"

# ãƒšã‚¤ãƒ³ã®é–‹å§‹ç•ªå·ã‚’ 0 ã‹ã‚‰ 1 ã«å¤‰æ›´ã™ã‚‹
set-option -g base-index 1

# tmuxã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹ã‚’å¤‰æ›´
unbind c
bind c new-window -c "#{pane_current_path}"

# æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆç›´å¾Œ
set-hook -g after-new-session 'run-shell "printf \"\033]0;%s\007\" \"#{socket_path:t}\""'

# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒ attach ã—ãŸç›´å¾Œï¼ˆæ¨å¥¨ï¼‰
set-hook -g client-attached 'run-shell "printf \"\033]0;%s\007\" \"#{socket_path:t}\""'

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®åŸºæœ¬é•·ã•
set -g status-left-length 40
set -g status-right-length 80

# ================================
#  Session-specific color themes + icons
# ================================
run-shell "
case '#S' in \
  salon-dev)
    tmux set -s status-bg colour33;   # blue
    tmux set -s status-fg black
    tmux set -s status-left ' ğŸ’‡  #S '
    ;; \
  base)
    tmux set -s status-bg colour34;   # green
    tmux set -s status-fg black
    tmux set -s status-left ' ğŸ§±  #S '
    ;; \
  core-dev)
    tmux set -s status-bg colour166;  # orange
    tmux set -s status-fg black
    tmux set -s status-left ' âš™ï¸  #S '
    ;; \
  app-dev)
    tmux set -s status-bg colour205;  # pink-ish red
    tmux set -s status-fg black
    tmux set -s status-left ' ğŸ“±  #S '
    ;; \
  exp-dev)
    tmux set -s status-bg colour127;  # purple
    tmux set -s status-fg black
    tmux set -s status-left ' ğŸ§ª  #S '
    ;; \
  ops-dev)
    tmux set -s status-bg colour226;  # yellow
    tmux set -s status-fg black
    tmux set -s status-left ' ğŸ“Š  #S '
    ;; \
  ai-dev)
    tmux set -s status-bg colour45;   # cyan
    tmux set -s status-fg black
    tmux set -s status-left ' ğŸ¤–  #S '
    ;; \
esac
"
# ã‚»ãƒƒã‚·ãƒ§ãƒ³åãŒå¤‰ã‚ã£ãŸã‚‰è‡ªå‹•ã§è¨­å®šå†èª­è¾¼
set-hook -g session-renamed 'run-shell "tmux source-file ~/.tmux.conf"'
# æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆæ™‚ã«ã‚‚é©ç”¨
set-hook -g after-new-session 'run-shell "tmux source-file ~/.tmux.conf"'

##### TPM #####
set -g @plugin 'tmux-plugins/tpm'

##### Session restore #####
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# èµ·å‹•æ™‚ã«è‡ªå‹•å¾©å…ƒ
set -g @continuum-restore 'on'

# è‡ªå‹•ä¿å­˜é–“éš”ï¼ˆåˆ†ï¼‰
set -g @continuum-save-interval '15'

# å¾©å…ƒã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’åˆ¶é™ï¼ˆå®‰å…¨å¯„ã‚Šï¼‰
set -g @resurrect-processes 'ssh zsh bash fish vim nvim git'

##### Keybinds #####
# ä¿å­˜: prefix + Ctrl-s
# å¾©å…ƒ: prefix + Ctrl-r

##### TPM initï¼ˆå¿…ãšä¸€ç•ªä¸‹ï¼‰ #####
run '~/.tmux/plugins/tpm/tpm'
